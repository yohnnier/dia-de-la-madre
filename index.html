<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <!-- Para que sea responsive -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Love You by AlexDev</title>
  <link rel="icon" type="image/x-icon"
        href="https://cdn1.site-media.eu/images/0/16133687/icon-iY273linX_tpHWWdiFg2FQ.png">
  <meta name="language" content="es-ES">

  <!-- CSS externo -->
  <link rel="stylesheet"
        href="https://cdn1.site-media.eu/images/0/16133666/default-TEWH2-zVvPehy8lVeLfJsA.css">

  <style>
    /* Estilos generales */
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: Arial, sans-serif;
    }
    
    /* Oculta mensaje de navegador no compatible */
    #error {
      display: none !important;
    }

    /* Overlay que pide girar el dispositivo (portrait m√≥vil) */
    #rotateOverlay {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(255,255,255,0.95);
      display: none;
      align-items: center; justify-content: center;
      flex-direction: column;
      text-align: center;
      z-index: 10000;
      padding: 1em; box-sizing: border-box;
    }
    #rotateOverlay p {
      margin: .5em 0; font-size: 1.2em; color: #333;
    }

    /* Overlay que invita al usuario a tocar para iniciar (landscape m√≥vil) */
    #clickOverlay {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      display: none;
      align-items: center; justify-content: center;
      flex-direction: column;
      text-align: center;
      z-index: 10000;
      color: #fff;
      font-family: sans-serif;
      cursor: pointer;
    }
    #clickOverlay p {
      margin: .5em 0; font-size: 1.5em;
    }
    #clickOverlay .emoji {
      font-size: 3em;
      margin-bottom: 10px;
    }

    /* Contenedor fluido */
    #wrap {
      position: relative;
      width: 100%; max-width: 1100px;
      margin: 0 auto; padding: 0 10px;
      box-sizing: border-box;
    }

    /* Canvas escalable con l√≠mite de altura en m√≥vil */
    canvas {
      width: 100%; height: auto;
      display: block; max-height: 80vh;
    }

    /* Tipograf√≠a m√≥vil */
    @media (max-width: 600px) {
      #code { font-size: 0.9em; line-height: 1.3; }
    }
    
    /* Bot√≥n para audio */
    #audioControl {
      position: fixed;
      bottom: 10px;
      right: 10px;
      background: rgba(0,0,0,0.5);
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
      z-index: 1000;
      display: none;
    }
  </style>

  <!-- Scripts externos -->
  <script src="https://cdn1.site-media.eu/images/0/16133685/jquery.min-GcJNxTC20mopSDmtyQgvxg.js"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133684/jscex.min-8DEu3mcVF-IQOoAFF85AVg.js"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133672/jscex-parser-gMKKoMN_1Buvjqyae1gXug.js"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133675/jscex-jit-8XrVvUaYfxRmka8p22LKdg.js"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133678/jscex-builderbase.min-uYtL6J5-UFgKWi5DgA1xeA.js"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133682/jscex-async.min-T99yY7cMSVFY69Y7Qr-jOQ.js"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133681/jscex-async-powerpack.min-LShzfWY7Bht0u-pQsj1svQ.js"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133690/functions-yTfYUz53kfqph0J-VyuNng.js" charset="utf-8"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133670/love-wQCNCoDk8xb7ps6MWPcVHw.js" charset="utf-8"></script>
</head>

<body>
  <!-- Overlay de rotaci√≥n m√≥vil -->
  <div id="rotateOverlay">
    <p>üì±</p>
    <p>Para una mejor experiencia, gira tu dispositivo <strong>horizontalmente</strong>.</p>
  </div>

  <!-- Overlay de "clic para iniciar" -->
  <div id="clickOverlay">
    <div class="emoji">üëá</div>
    <p>Toca aqu√≠ para iniciar</p>
  </div>

  <!-- Bot√≥n para controlar audio -->
  <button id="audioControl">üîá Audio</button>

  <!-- Contenido principal -->
  <div id="main">
    <div id="wrap">
      <div id="text">
        <div id="code" style="font-size: 0.75em; line-height: 1.2;">
          <span class="say">En este D√≠a de la Madre queremos rendir homenaje a esas
            mujeres extraordinarias que, con su uniforme azul y su coraz√≥n,
            transforman el cuidado en un acto de amor infinito.</span><br><br>
          <!-- resto de tu texto -->
          <span class="say">¬°Feliz D√≠a de la Madre, hero√≠na de dos mundos!</span><br><br>
          <span class="say">  ‚Äî ¬°Te amamos!</span><br><br>
          <span class="say" style="font-size: 1.2em; font-weight: bold;">ASENF OVALLE</span><br>
          <span class="say" style="font-size: 0.8em; font-style: italic;">
            Programaci√≥n y dise√±o: Enf. Yohnnier Gomez
          </span>
        </div>
      </div>
      <canvas id="canvas" width="1100" height="680"></canvas>
    </div>
  </div>

  <!-- Audio -->
  <audio preload="auto" id="media"
         src="https://cdn1.site-media.eu/images/0/16133854/0510-jcsqMinMWl6vMW56XD2W9A.MP3"
         loop></audio>

  <script>
    // Esperar a que el DOM est√© listo
    document.addEventListener('DOMContentLoaded', function() {
      // Elementos DOM
      var body = document.body;
      var audio = document.getElementById('media');
      var canvas = document.getElementById('canvas');
      var clickOverlay = document.getElementById('clickOverlay');
      var rotateOverlay = document.getElementById('rotateOverlay');
      var audioControl = document.getElementById('audioControl');
      var hasTouchScreen = false;
      var animationStarted = false;
      
      // Comprobar si el dispositivo tiene pantalla t√°ctil
      if ('maxTouchPoints' in navigator) {
        hasTouchScreen = navigator.maxTouchPoints > 0;
      } else if ('msMaxTouchPoints' in navigator) {
        hasTouchScreen = navigator.msMaxTouchPoints > 0;
      } else {
        var mQ = window.matchMedia && matchMedia('(pointer:coarse)');
        if (mQ && mQ.media === '(pointer:coarse)') {
          hasTouchScreen = !!mQ.matches;
        } else if ('orientation' in window) {
          hasTouchScreen = true; // Deprecated, but good fallback
        }
      }
      
      // Funci√≥n para intentar reproducir audio
      function playAudio() {
        if (audio.paused) {
          audio.play().then(function() {
            audioControl.textContent = 'üîä Audio';
            audioControl.style.display = 'block';
          }).catch(function(err) {
            console.log("Reproducci√≥n de audio fallida:", err);
            audioControl.style.display = 'block';
          });
        }
      }
      
      // Funci√≥n para iniciar la animaci√≥n
      function startAnimation() {
        if (!animationStarted) {
          animationStarted = true;
          
          // En dispositivos m√≥viles, forzar un click en el canvas
          if (hasTouchScreen) {
            // Ocultar todos los overlays
            clickOverlay.style.display = 'none';
            rotateOverlay.style.display = 'none';
            
            // Hacer visible el canvas y otros elementos
            document.getElementById('main').style.visibility = 'visible';
            canvas.style.visibility = 'visible';
            
            // Intentar reproducir audio
            playAudio();
            
            // Simular un clic en el canvas para iniciar la animaci√≥n
            // Esto es importante para activar el script love.js
            setTimeout(function() {
              var evt = new MouseEvent('click', {
                bubbles: true,
                cancelable: true,
                view: window
              });
              canvas.dispatchEvent(evt);
            }, 100);
          }
        }
      }
      
      // Funci√≥n para verificar la orientaci√≥n y mostrar el overlay adecuado
      function checkOrientation() {
        if (hasTouchScreen) {
          var isPortrait = window.innerHeight > window.innerWidth;
          
          if (isPortrait) {
            // Dispositivo en vertical - mostrar aviso para girar
            rotateOverlay.style.display = 'flex';
            clickOverlay.style.display = 'none';
            document.getElementById('main').style.visibility = 'hidden';
          } else {
            // Dispositivo en horizontal - ocultar aviso, mostrar Click Here si no se inici√≥ animaci√≥n
            rotateOverlay.style.display = 'none';
            
            if (!animationStarted) {
              clickOverlay.style.display = 'flex';
              document.getElementById('main').style.visibility = 'hidden';
            } else {
              clickOverlay.style.display = 'none';
              document.getElementById('main').style.visibility = 'visible';
            }
          }
        } else {
          // No es dispositivo t√°ctil, ocultar overlays
          rotateOverlay.style.display = 'none';
          clickOverlay.style.display = 'none';
          document.getElementById('main').style.visibility = 'visible';
        }
      }
      
      // Comprobar orientaci√≥n inicial
      checkOrientation();
      
      // Eventos para detectar cambios de orientaci√≥n
      window.addEventListener('orientationchange', function() {
        // Esperar un momento para que se complete el giro
        setTimeout(checkOrientation, 300);
      });
      
      window.addEventListener('resize', function() {
        setTimeout(checkOrientation, 300);
      });
      
      // Evento para iniciar cuando se hace clic en el overlay
      clickOverlay.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        startAnimation();
      });
      
      // Evento para el bot√≥n de audio
      audioControl.addEventListener('click', function() {
        if (audio.paused) {
          audio.play();
          this.textContent = 'üîä Audio';
        } else {
          audio.pause();
          this.textContent = 'üîá Audio';
        }
      });
      
      // Si no es un dispositivo m√≥vil, iniciar autom√°ticamente
      if (!hasTouchScreen) {
        // Esperar un segundo e iniciar autom√°ticamente
        setTimeout(function() {
          // Simular clic en el canvas para iniciar animaci√≥n
          canvas.dispatchEvent(new MouseEvent('click', {
            bubbles: true,
            cancelable: true,
            view: window
          }));
          
          // Iniciar audio
          playAudio();
        }, 1000);
      }
    });
  </script>
</body>
</html>
