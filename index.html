<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <!-- Para que sea responsive -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Love You by AlexDev</title>
  <link rel="icon" type="image/x-icon"
        href="https://cdn1.site-media.eu/images/0/16133687/icon-iY273linX_tpHWWdiFg2FQ.png">
  <meta name="language" content="es-ES">

  <!-- CSS externo -->
  <link rel="stylesheet"
        href="https://cdn1.site-media.eu/images/0/16133666/default-TEWH2-zVvPehy8lVeLfJsA.css">

  <style>
    /* Oculta mensaje de navegador no compatible */
    #error {
      display: none !important;
    }

    /* Overlay que pide girar el dispositivo (portrait m√≥vil) */
    #rotateOverlay {
      position: fixed; top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(255,255,255,0.95);
      display: none;
      align-items: center; justify-content: center;
      text-align: center;
      z-index: 9999;
      padding: 1em; box-sizing: border-box;
    }
    #rotateOverlay p {
      margin: .5em 0; font-size: 1.2em; color: #333;
    }

    /* Overlay que invita al usuario a tocar para iniciar (landscape m√≥vil) */
    #clickOverlay {
      position: fixed; top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.7); /* Oscurecido para mejor visibilidad */
      display: none;
      align-items: center; justify-content: center;
      text-align: center;
      z-index: 9998;
      color: #fff;
      font-family: sans-serif;
      cursor: pointer; /* Indica que es clickeable */
    }
    #clickOverlay p {
      margin: .3em 0; font-size: 1.5em; /* Texto m√°s grande */
    }
    #clickOverlay div {
      background: rgba(255,255,255,0.2);
      padding: 20px; border-radius: 10px;
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    /* Portrait m√≥vil: mostrar rotateOverlay */
    @media (max-width: 600px) and (orientation: portrait) {
      #rotateOverlay { display: flex; }
      #clickOverlay { display: none; }
    }

    /* Contenedor fluido */
    #wrap {
      position: relative !important;
      width: 100% !important; max-width: 1100px !important;
      margin: 0 auto !important; padding: 0 10px !important;
    }

    /* Canvas escalable con l√≠mite de altura en m√≥vil */
    canvas {
      width: 100% !important; height: auto !important;
      display: block !important; max-height: 70vh !important;
    }

    /* Tipograf√≠a m√≥vil */
    @media (max-width: 600px) {
      #code { font-size: 0.9em !important; line-height: 1.3 !important; }
    }
  </style>

  <!-- Scripts externos -->
  <script src="https://cdn1.site-media.eu/images/0/16133685/jquery.min-GcJNxTC20mopSDmtyQgvxg.js"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133684/jscex.min-8DEu3mcVF-IQOoAFF85AVg.js"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133672/jscex-parser-gMKKoMN_1Buvjqyae1gXug.js"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133675/jscex-jit-8XrVvUaYfxRmka8p22LKdg.js"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133678/jscex-builderbase.min-uYtL6J5-UFgKWi5DgA1xeA.js"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133682/jscex-async.min-T99yY7cMSVFY69Y7Qr-jOQ.js"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133681/jscex-async-powerpack.min-LShzfWY7Bht0u-pQsj1svQ.js"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133690/functions-yTfYUz53kfqph0J-VyuNng.js"
          charset="utf-8"></script>
  <script src="https://cdn1.site-media.eu/images/0/16133670/love-wQCNCoDk8xb7ps6MWPcVHw.js"
          charset="utf-8"></script>
</head>

<body>
  <!-- Overlay de rotaci√≥n m√≥vil -->
  <div id="rotateOverlay">
    <div>
      <p>üì±</p>
      <p>Para una mejor experiencia, gira tu dispositivo <strong>horizontalmente</strong>.</p>
    </div>
  </div>

  <!-- Overlay de "clic para iniciar" -->
  <div id="clickOverlay">
    <div>
      <p>üëÜ</p>
      <p>Toca aqu√≠ para iniciar</p>
    </div>
  </div>

  <!-- Contenido principal -->
  <div id="main">
    <div id="wrap">
      <div id="text">
        <div id="code" style="font-size: 0.75em; line-height: 1.2;">
          <span class="say">En este D√≠a de la Madre queremos rendir homenaje a esas
            mujeres extraordinarias que, con su uniforme azul y su coraz√≥n,
            transforman el cuidado en un acto de amor infinito.</span><br><br>
          <!-- resto de tu texto -->
          <span class="say">¬°Feliz D√≠a de la Madre, hero√≠na de dos mundos!</span><br><br>
          <span class="say">  ‚Äî ¬°Te amamos!</span><br><br>
          <span class="say" style="font-size: 1.2em; font-weight: bold;">ASENF OVALLE</span><br>
          <span class="say" style="font-size: 0.8em; font-style: italic;">
            Programaci√≥n y dise√±o: Enf. Yohnnier Gomez
          </span>
        </div>
      </div>
      <canvas id="canvas" width="1100" height="680"></canvas>
    </div>
  </div>

  <!-- Audio -->
  <audio preload="auto" id="media"
         src="https://cdn1.site-media.eu/images/0/16133854/0510-jcsqMinMWl6vMW56XD2W9A.MP3"
         loop></audio>

  <script>
    // Variables globales
    var audio, canvas, clickOverlay, rotateOverlay;
    var animationStarted = false;
    
    // Funci√≥n que determina si estamos en m√≥vil
    function isMobile() {
      return window.matchMedia("(max-width: 600px)").matches;
    }
    
    // Funci√≥n que determina si estamos en orientaci√≥n landscape
    function isLandscape() {
      return window.matchMedia("(orientation: landscape)").matches;
    }
    
    // Funci√≥n para comprobar y actualizar los overlays seg√∫n la orientaci√≥n
    function updateOverlays() {
      // Solo hacer esto para dispositivos m√≥viles
      if (isMobile()) {
        if (isLandscape()) {
          // En landscape m√≥vil
          rotateOverlay.style.display = "none";
          
          // Solo mostrar clickOverlay si la animaci√≥n no ha comenzado
          if (!animationStarted) {
            clickOverlay.style.display = "flex";
          } else {
            clickOverlay.style.display = "none";
          }
        } else {
          // En portrait m√≥vil
          rotateOverlay.style.display = "flex";
          clickOverlay.style.display = "none";
        }
      } else {
        // En escritorio, ocultar ambos overlays
        rotateOverlay.style.display = "none";
        clickOverlay.style.display = "none";
      }
    }
    
    // Iniciar reproducci√≥n de audio de manera forzada (requiere interacci√≥n del usuario)
    function playAudio() {
      if (audio && audio.paused) {
        audio.play().catch(function(err) {
          console.log("Reproducci√≥n de audio fallida:", err);
          // Si falla el autoplay, mostrar controles como fallback
          audio.controls = true;
        });
      }
    }
    
    // Funci√≥n para iniciar la animaci√≥n
    function startAnimation() {
      animationStarted = true;
      
      // Asegurarse de que el canvas sea visible
      if (canvas) {
        canvas.style.visibility = "visible";
        
        // Disparar evento de clic en el canvas para iniciar la animaci√≥n
        // Este es un evento simulado para activar cualquier listener en el canvas
        var clickEvent = new MouseEvent('click', {
          bubbles: true,
          cancelable: true,
          view: window
        });
        canvas.dispatchEvent(clickEvent);
        
        // Tambi√©n intenta llamar a cualquier funci√≥n de inicio directamente
        // (en caso de que el script no use event listeners)
        if (typeof startHeartAnimation === 'function') {
          startHeartAnimation();
        }
        
        // Intenta iniciar el audio
        playAudio();
        
        // Ocultar el overlay de clic una vez iniciada la animaci√≥n
        if (clickOverlay) {
          clickOverlay.style.display = "none";
        }
      }
    }
    
    // Funci√≥n principal que se ejecuta cuando el DOM est√° listo
    document.addEventListener('DOMContentLoaded', function() {
      // Inicializar referencias
      audio = document.getElementById('media');
      canvas = document.getElementById('canvas');
      clickOverlay = document.getElementById('clickOverlay');
      rotateOverlay = document.getElementById('rotateOverlay');
      
      // Asegurarse de que el canvas sea visible
      if (canvas) {
        canvas.style.visibility = "visible";
      }
      
      // Verificar orientaci√≥n al cargar
      updateOverlays();
      
      // Escuchar cambios de orientaci√≥n
      window.addEventListener('orientationchange', function() {
        // Peque√±o retraso para asegurarnos de que el cambio de orientaci√≥n se complete
        setTimeout(updateOverlays, 500);
      });
      
      // Tambi√©n escuchar cambios de tama√±o de ventana
      window.addEventListener('resize', updateOverlays);
      
      // Manejar clic en el overlay
      if (clickOverlay) {
        clickOverlay.addEventListener('click', function() {
          startAnimation();
        });
      }
      
      // Intentar reproducir el audio autom√°ticamente despu√©s de un tiempo
      setTimeout(playAudio, 2000);
      
      // Hack adicional para asegurarnos de que despu√©s de 1 segundo verificamos 
      // si estamos en landscape y mostramos el overlay si es necesario
      setTimeout(function() {
        if (isMobile() && isLandscape() && !animationStarted) {
          clickOverlay.style.display = "flex";
        }
      }, 1000);
    });
    
    // Hack para garantizar que el overlay aparezca en landscape m√≥vil incluso si la p√°gina ya est√° cargada
    window.addEventListener('load', function() {
      if (typeof isMobile === 'function' && typeof isLandscape === 'function') {
        if (isMobile() && isLandscape()) {
          var clickOverlay = document.getElementById('clickOverlay');
          if (clickOverlay && !animationStarted) {
            clickOverlay.style.display = "flex";
          }
        }
      }
    });
  </script>
</body>
</html>
